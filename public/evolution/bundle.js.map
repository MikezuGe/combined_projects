{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/evolution/src/Entities/Entity.js","webpack:///./public/evolution/src/Entities/Plant.js","webpack:///./public/evolution/src/Entities/Herbivore.js","webpack:///./public/evolution/src/Entities/index.js","webpack:///./public/evolution/src/Cell.js","webpack:///./public/evolution/src/World.js","webpack:///./public/evolution/src/Renderer/Renderer.js","webpack:///./public/evolution/src/utility/setGlobalStyle.js","webpack:///./public/evolution/src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Entity","constructor","this","cell","die","removeEntity","random","floor","Math","randomize","min","max","ENTITY_TYPE","Plant","super","size","timeToLive","TIME_TO_LIVE_MIN","TIME_TO_LIVE_MAX","timeToCanGrow","TIME_TO_GROW_MIN","TIME_TO_GROW_MAX","timeToCanBreed","TIME_TO_BREED_MIN","TIME_TO_BREED_MAX","grow","ENTITY_MAX_SIZE","breed","breedTo","getEmptyAdjacentCell","setEntity","SHRINK_ON_BREED","update","ENTITY_COLOR","SIZE_TO_BREED","Herbivore_random","Herbivore","satiation","timeToCanMove","TIME_TO_MOVE_MIN","TIME_TO_MOVE_MAX","timeToSatiationDecrease","TIME_SATIATION_DECREASE_MIN","TIME_SATIATION_DECREASE_MAX","direction","getHungrier","findFood","closest","Infinity","distance","nextCell","adjacentCells","entity","ENTITY_PLANT","move","eat","moveEntityTo","SATIATION_TO_EAT","entityTypes","ENTITY_HERBIVORE","Cell_random","Cell","cellNumber","cellType","renderingPosition","openCells","filter","length","canvas","document","createElement","gl","getContext","getElementById","appendChild","vs","createShader","VERTEX_SHADER","fs","FRAGMENT_SHADER","shaderSource","compileShader","verr","getShaderInfoLog","console","log","ferr","program","createProgram","attachShader","linkProgram","useProgram","css","style","type","head","getElementsByTagName","styleSheet","cssText","createTextNode","setGlobalStyle","window","addEventListener","e","updTime","world","width","height","Error","dimension","field","setupFieldCells","setTimeout","getCellType","x","y","push","renderer","vertices","varying","positionBuffer","createBuffer","varyingBuffer","vertexAttributes","a_position","buffer","attribute","getAttribLocation","FLOAT","stride","offset","a_color","a_alpha","a_size","setupWorldRender","viewport","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","DYNAMIC_DRAW","values","enableVertexAttribArray","vertexAttribPointer","renderWorld","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","pos","drawArrays","POINTS","frame","requestAnimationFrame"],"mappings":"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","file":"evolution/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 72);\n","export default class Entity {\n\n  constructor () {\n    this.cell = null;\n  }\n\n  die () {\n    this.cell.removeEntity();\n  }\n\n}\n","import Entity from './Entity';\n\n\nconst { random, floor, } = Math;\nconst randomize = (min, max) => floor(random() * (max - min)) + min;\n\n\nexport const ENTITY_TYPE = 'ENTITY_PLANT';\n\n\nexport default class Plant extends Entity {\n\n  constructor () {\n    super();\n    this.size = 2;\n    this.timeToLive = randomize(this.TIME_TO_LIVE_MIN, this.TIME_TO_LIVE_MAX);\n    this.timeToCanGrow = randomize(this.TIME_TO_GROW_MIN, this.TIME_TO_GROW_MAX);\n    this.timeToCanBreed = randomize(this.TIME_TO_BREED_MIN, this.TIME_TO_BREED_MAX);\n  }\n\n  grow () {\n    if (this.size < this.ENTITY_MAX_SIZE) {\n      this.size++;\n      this.timeToCanGrow = randomize(this.TIME_TO_GROW_MIN, this.TIME_TO_GROW_MAX);\n    }\n  }\n\n  breed () {\n    const breedTo = this.cell.getEmptyAdjacentCell();\n    if (breedTo) {\n      breedTo.setEntity(new this.constructor());\n      this.size -= this.SHRINK_ON_BREED;\n      this.timeToCanBreed = randomize(this.TIME_TO_BREED_MIN, this.TIME_TO_BREED_MAX);\n    }\n  }\n\n  update () {\n    if (--this.timeToLive <= 0) return this.die();\n    this.timeToCanGrow <= 0 ? this.grow() : this.timeToCanGrow--;\n    this.timeToCanBreed <= 0 ? this.breed() : this.timeToCanBreed--;\n  }\n\n}\n\nPlant.prototype.ENTITY_TYPE = ENTITY_TYPE;\nPlant.prototype.ENTITY_COLOR = 0;\nPlant.prototype.TIME_TO_LIVE_MIN = 800;\nPlant.prototype.TIME_TO_LIVE_MAX = 1000;\nPlant.prototype.TIME_TO_GROW_MIN = 10;//80;\nPlant.prototype.TIME_TO_GROW_MAX = 20;//120;\nPlant.prototype.TIME_TO_BREED_MIN = 50;//100;\nPlant.prototype.TIME_TO_BREED_MAX = 100;//500;\n\nPlant.prototype.ENTITY_MAX_SIZE = 10;\nPlant.prototype.SIZE_TO_BREED = 6;\nPlant.prototype.SHRINK_ON_BREED = 4;\n","import Entity from './Entity';\nimport { ENTITY_TYPE as ENTITY_PLANT, } from './Plant';\n\n\nconst { random, floor, } = Math;\nconst randomize = (min, max) => floor(random() * (max - min)) + min;\n\n\nexport const ENTITY_TYPE = 'ENTITY_HERBIVORE';\n\n\nexport default class Herbivore extends Entity {\n\n  constructor () {\n    super();\n    this.size = 2;\n    this.satiation = 3;\n    this.timeToLive = randomize(this.TIME_TO_LIVE_MIN, this.TIME_TO_LIVE_MAX);\n    this.timeToCanGrow = randomize(this.TIME_TO_GROW_MIN, this.TIME_TO_GROW_MAX);\n    this.timeToCanBreed = randomize(this.TIME_TO_BREED_MIN, this.TIME_TO_BREED_MAX);\n    this.timeToCanMove = randomize(this.TIME_TO_MOVE_MIN, this.TIME_TO_MOVE_MAX);\n    this.timeToSatiationDecrease = randomize(this.TIME_SATIATION_DECREASE_MIN, this.TIME_SATIATION_DECREASE_MAX);\n\n    this.direction = null;\n  }\n\n  getHungrier () {\n    this.satiation--;\n    if (this.satiation <= 0) {\n      this.timeToLive = 0;\n      return;\n    }\n    this.timeToSatiationDecrease = randomize(this.TIME_SATIATION_DECREASE_MIN, this.TIME_SATIATION_DECREASE_MAX);\n  }\n\n  findFood () {\n    let direction = null;\n    let closest = Infinity;\n    for (let i = 0; i < 4; i++) {\n      let distance = 1;\n      let nextCell = this.cell.adjacentCells[i];\n      if (!nextCell) continue;\n      while ((nextCell = nextCell.adjacentCells[i])) {\n        distance++;\n        if (!nextCell.entity) continue;\n        if (nextCell.entity.ENTITY_TYPE !== ENTITY_PLANT) break;\n        if (distance < closest) {\n          closest = distance\n          direction = i;\n        }\n      }\n    }\n    if (closest < Infinity) return direction;\n  }\n\n  move () {\n    const nextCell = this.cell.adjacentCells[this.direction];\n    if (!nextCell) {\n      this.direction = null;\n    } else if (!nextCell.entity) {\n      this.cell.moveEntityTo(nextCell);\n    } else if (nextCell.entity.ENTITY_TYPE === ENTITY_PLANT) {\n      this.eat(nextCell);\n    }\n  }\n\n  eat (cell) {\n    this.satiation += floor(cell.entity.size / 3) + 1;\n    this.timeToSatiationDecrease = randomize(this.TIME_SATIATION_DECREASE_MIN, this.TIME_SATIATION_DECREASE_MAX);\n    this.cell.moveEntityTo(cell);\n    this.direction = null;\n  }\n\n  grow () {\n    if (this.size >= this.ENTITY_MAX_SIZE) return;\n    this.size++;\n    this.timeToCanGrow = randomize(this.TIME_TO_GROW_MIN, this.TIME_TO_GROW_MAX);\n  }\n\n  breed () {\n    const breedTo = this.cell.getEmptyAdjacentCell();\n    if (!breedTo) return;\n    breedTo.setEntity(new this.constructor());\n    this.size -= this.SHRINK_ON_BREED;\n    this.timeToCanBreed = randomize(this.TIME_TO_BREED_MIN, this.TIME_TO_BREED_MAX);\n  }\n\n  update () {\n    this.timeToSatiationDecrease <= 0 ? this.getHungrier() : this.timeToSatiationDecrease--;\n    if (--this.timeToLive <= 0) return this.die(); // Checks before this line may cause death to the entity\n    \n    this.timeToCanGrow <= 0 ? this.grow() : this.timeToCanGrow--;\n    this.timeToCanBreed <= 0 ? this.breed() : this.timeToCanBreed--;\n    this.timeToCanMove > 0 && this.timeToCanMove--;\n    \n    if (this.satiation <= this.SATIATION_TO_EAT) {\n      if (!this.direction) {\n        this.direction = this.findFood();\n      }\n      this.timeToCanMove <= 0 && this.move();\n    }\n  }\n\n}\n\nHerbivore.prototype.ENTITY_TYPE = ENTITY_TYPE;\nHerbivore.prototype.ENTITY_COLOR = 1;\nHerbivore.prototype.TIME_TO_LIVE_MIN = 3000;\nHerbivore.prototype.TIME_TO_LIVE_MAX = 3500;\nHerbivore.prototype.TIME_TO_GROW_MIN = 100;\nHerbivore.prototype.TIME_TO_GROW_MAX = 140;\nHerbivore.prototype.TIME_TO_BREED_MIN = 600;\nHerbivore.prototype.TIME_TO_BREED_MAX = 800;\nHerbivore.prototype.TIME_TO_MOVE_MIN = 40;\nHerbivore.prototype.TIME_TO_MOVE_MAX = 50;\nHerbivore.prototype.TIME_SATIATION_DECREASE_MIN = 80;\nHerbivore.prototype.TIME_SATIATION_DECREASE_MAX = 100;\n\nHerbivore.prototype.SATIATION_TO_EAT = 8;\n\nHerbivore.prototype.ENTITY_MAX_SIZE = 10;\nHerbivore.prototype.SIZE_TO_BREED = 8;\nHerbivore.prototype.SHRINK_ON_BREED = 5;\n","export { default as Plant, } from './Plant'\nexport { default as Herbivore, } from './Herbivore'\n//export { default as Carnivore, } from './Carnivore'\n\n\nimport { ENTITY_TYPE as ENTITY_PLANT, } from './Plant';\nimport { ENTITY_TYPE as ENTITY_HERBIVORE, } from './Herbivore';\n//import { ENTITY_TYPE as ENTITY_CARNIVORE, } from './Carnivore';\n\n\nexport const entityTypes = {\n  ENTITY_PLANT,\n  ENTITY_HERBIVORE,\n  //ENTITY_CARNIVORE,\n};\n","import { entityTypes, } from './Entities';\nconst {\n  ENTITY_PLANT,\n  ENTITY_HERBIVORE,\n  //ENTITY_CARNIVORE,\n} = entityTypes;\n\n\nconst { random, floor, } = Math;\n\n\nexport default class Cell {\n\n  constructor (cellNumber, cellType, renderingPosition) {\n    this.cellNumber = cellNumber;\n    this.cellType = cellType;\n    this.renderingPosition = renderingPosition;\n    this.adjacentCells = [];\n    this.entity = null;\n  }\n\n  getEmptyAdjacentCell () {\n    const { adjacentCells, entity: { ENTITY_TYPE, }, } = this;\n    const openCells = adjacentCells.filter(cell => {\n      if (!cell) return false;\n      if (!cell.entity) return true;\n      switch (ENTITY_TYPE) {\n      case ENTITY_HERBIVORE: return cell.entity.ENTITY_TYPE === ENTITY_PLANT;\n      //case ENTITY_CARNIVORE: return cell.entity.ENTITY_TYPE !== ENTITY_CARNIVORE;\n      default: return false;\n      }\n    });\n    return openCells.length\n      ? openCells[floor(random() * openCells.length)]\n      : null;\n  }\n  \n  moveEntityTo (cell) {\n    const entity = this.entity;\n    this.removeEntity();\n    cell.setEntity(entity);\n  }\n\n  setEntity (entity) {\n    this.entity && this.removeEntity();\n    entity.cell = this;\n    this.entity = entity;\n  }\n\n  removeEntity () {\n    this.entity.cell = null;\n    this.entity = null;\n  }\n\n  update () {\n    this.entity && this.entity.update();\n  }\n\n}\n","import Cell from './Cell';\nimport {\n  Plant,\n  Herbivore,\n} from './Entities';\n\n\nconst { floor, } = Math;\n\n\nexport default class World {\n\n  constructor (width, height) {\n    if (width < 3 || height < 3) {\n      throw new Error('Too small world, must be at least 3x3');\n    }\n    this.width = width;\n    this.height = height;\n    this.dimension = width * height;\n    this.field = [];\n    this.setupFieldCells();\n    // TEMP\n    // REMOVE AFTER\n    this.field[0].setEntity(new Plant());\n    setTimeout(() => {\n      this.field[100].setEntity(new Herbivore());\n    }, 10000);\n  }\n\n  setupFieldCells () {\n    const { field, width, height, dimension, getCellType, } = this;\n    for (let i = 0; i < dimension; i++) {\n      field[i] = new Cell(i, getCellType(i, width, dimension), {\n        // Cell draw position in clipspace\n        x: -1 + 2 * ((i % width * 10 + 5) / 10 / width),\n        y: -1 + 2 * ((floor(i / width) * 10 + 5) / 10 / height),\n      });\n    }\n    for (let i = 0; i < dimension; i++) {\n      // Set adjacent cells\n      field[i].adjacentCells.push(\n        field[i - width] ? field[i - width] : null,\n        (i + 1) % width !== 0 && field[i + 1] ? field[i + 1] : null,\n        field[i + width] ? field[i + width] : null,\n        i % width !== 0 && field[i - 1] ? field[i - 1] : null,\n      );\n    }\n  }\n\n  getCellType (i, width, dimension) {\n    if (i === 0) return 'top-left';\n    if (i + 1 === width) return 'top-right';\n    if (i + width === dimension) return 'bottom-left';\n    if (i + 1 === dimension) return 'bottom-right';\n    if (i < width) return 'top';\n    if (i + width + 1 > dimension) return 'bottom';\n    if (i % width === 0) return 'left';\n    if ((i + 1) % width === 0) return 'right';\n    return 'normal';\n  }\n\n  update () {\n    const { field, } = this;\n    for (const cell of field) {\n      cell.update();\n    }\n  }\n\n}\n","const canvas = document.createElement('canvas');\nconst gl = canvas.getContext('webgl2');\ndocument.getElementById('root').appendChild(canvas);\n\n\nconst vss = `#version 300 es\nin vec2 a_position;\nin float a_color;\nin float a_alpha;\nin float a_size;\n\nvec3 getColor () {\n  switch (int(a_color)) {\n    case 0: return vec3(0.0, 1.0, 0.0);\n    case 1: return vec3(1.0, 0.75, 0.8);\n    case 2: return vec3(1.0, 0.0, 0.0);\n    default: return vec3(0.0, 0.0, 0.0);\n  }\n}\n\nout vec4 color;\nvoid main () {\n  color = vec4(getColor(), a_alpha);\n  gl_Position = vec4(a_position.x, -a_position.y, 0.0, 1.0);\n  gl_PointSize = a_size;\n}\n`;\n\n\nconst fss = `#version 300 es\nprecision mediump float;\n\nin vec4 color;\n\nout vec4 fragColor;\nvoid main () {\n  if (color.w == 0.0) {\n    discard;\n  }\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n  float r = dot(cxy, cxy);\n  if (r > 1.0) {\n    discard;\n  }\n  float delta = fwidth(r);\n  float alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n  fragColor = vec4(color.xyz * alpha, color.w);\n}\n`;\n\n\nconst vs = gl.createShader(gl.VERTEX_SHADER);\nconst fs = gl.createShader(gl.FRAGMENT_SHADER);\ngl.shaderSource(vs, vss);\ngl.shaderSource(fs, fss);\ngl.compileShader(vs);\ngl.compileShader(fs);\nconst verr = gl.getShaderInfoLog(vs);\nconsole.log('vs compile err: ', verr); //eslint-disable-line\nconst ferr = gl.getShaderInfoLog(fs);\nconsole.log('fs compile err: ', ferr); //eslint-disable-line\n\n\nconst program = gl.createProgram();\ngl.attachShader(program, vs);\ngl.attachShader(program, fs);\ngl.linkProgram(program);\ngl.useProgram(program);\n\n\nexport default class Renderer {\n\n  constructor () {\n    this.vertices = [];\n    this.varying = [];\n    this.positionBuffer = gl.createBuffer();\n    this.varyingBuffer = gl.createBuffer();\n    this.vertexAttributes = {\n      a_position: {\n        buffer: this.positionBuffer,\n        attribute: gl.getAttribLocation(program, 'a_position'),\n        type: gl.FLOAT,\n        size: 2,\n        stride: 2 * 4,\n        offset: 0,\n      },\n      a_color: {\n        buffer: this.varyingBuffer,\n        attribute: gl.getAttribLocation(program, 'a_color'),\n        type: gl.FLOAT,\n        size: 1,\n        stride: 3 * 4,\n        offset: 0,\n      },\n      a_alpha: {\n        buffer: this.varyingBuffer,\n        attribute: gl.getAttribLocation(program, 'a_alpha'),\n        type: gl.FLOAT,\n        size: 1,\n        stride: 3 * 4,\n        offset: 1 * 4,\n      },\n      a_size: {\n        buffer: this.varyingBuffer,\n        attribute: gl.getAttribLocation(program, 'a_size'),\n        type: gl.FLOAT,\n        size: 1,\n        stride: 3 * 4,\n        offset: 2 * 4,\n      },\n    };\n  }\n\n  setupWorldRender ({ width, height, field, }) {\n    canvas.width = width * 10;\n    canvas.height = height * 10;\n    gl.viewport(0, 0, canvas.width, canvas.height);\n\n    const { vertices, varying, } = this;\n    for (const { renderingPosition, } of field) {\n      vertices.push(\n        renderingPosition.x,\n        renderingPosition.y,\n      );\n      varying.push(\n        0.0,\n        0.0,\n        0.0,\n      );\n    }\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n\n    // Varying buffer is left last to be bound. This is important!\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.varyingBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(varying), gl.DYNAMIC_DRAW);\n\n    for (const { buffer, attribute, size, type, stride, offset, } of Object.values(this.vertexAttributes)) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n      gl.enableVertexAttribArray(attribute);\n      gl.vertexAttribPointer(attribute, size, type, false, stride, offset);\n    }\n  }\n\n  renderWorld ({ field, dimension, }) {\n    gl.clearColor(0.4, 0.4, 0.4, 1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    const { varying, } = this;\n    for (const { entity, cellNumber, } of field) {\n      const pos = cellNumber * 3;\n      if (entity) {\n        varying[pos + 0] = entity.ENTITY_COLOR;\n        varying[pos + 1] = 1.0\n        varying[pos + 2] = entity.size;\n      } else {\n        varying[pos + 1] = 0.0;\n      }\n    }\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(varying), gl.DYNAMIC_DRAW);\n    gl.drawArrays(gl.POINTS, 0, dimension);\n  }\n\n}\n","const setGlobalStyle = css => {\n  const style = document.createElement('style');\n  style.type = 'text/css';\n  (document.head || document.getElementsByTagName('head')[0]).appendChild(style);\n  if (!css) {\n    css = `\n    * {\n      font-family: 'Ubuntu', sans-serif;\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n      font-size: 16px;\n    }\n    \n    html body {\n      height: 100vh;\n      width: 100vw;\n      overflow: hidden;\n    }\n    \n    #root {\n      width: 100%;\n      height: 100%;\n    }\n    \n    canvas {\n      //width: 100%;\n      //height: 100%;\n      background: gray;\n    }\n    `;\n  }\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\n\nexport default setGlobalStyle;\n","import World from './World';\nimport { Renderer, } from './Renderer';\n\nimport { setGlobalStyle, } from './utility';\n\nsetGlobalStyle(`\n* {\n  font-family: 'Ubuntu', sans-serif;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-size: 16px;\n}\n\nhtml body {\n  height: 100vh;\n  width: 100vw;\n  overflow: hidden;\n}\n\n#root {\n  width: 100%;\n  height: 100%;\n}\n\ncanvas {\n  //width: 100%;\n  //height: 100%;\n  background: gray;\n}\n`);\n\n\nwindow.addEventListener('keyup', e => {\n  if (e.key === 'p') {\n    updTime += updTime < 20 ? 1 : 0;\n  } else if (e.key === 'o') {\n    updTime -= updTime > 0 ? 1 : 0;\n  }\n}, false)\nlet updTime = 3;\n\nconst world = new World(/*190, 75*/50, 50);\nconst renderer = new Renderer();\nrenderer.setupWorldRender(world);\n//renderer.renderWorld(world);\nconst frame = () => { // eslint-disable-line\n  requestAnimationFrame(frame);\n  for (let i = 0; i < updTime; i++)\n    world.update();\n  renderer.renderWorld(world);\n}\nrequestAnimationFrame(frame);\n//setInterval(frame, 1000);\n"],"sourceRoot":""}