!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=63)}([function(e,t,r){"use strict";var n=r(9),i=r(38),o=Object.prototype.toString;function a(e){return"[object Array]"===o.call(e)}function u(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===o.call(e)}function l(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),a(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:s,isStream:function(e){return u(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,i=arguments.length;n<i;n++)l(arguments[n],r);return t},extend:function(e,t,r){return l(t,function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53);Object.defineProperty(t,"Color",{enumerable:!0,get:function(){return c(n).default}});var i=r(52);Object.defineProperty(t,"Vec2",{enumerable:!0,get:function(){return c(i).default}});var o=r(51);Object.defineProperty(t,"Vec3",{enumerable:!0,get:function(){return c(o).default}});var a=r(50);Object.defineProperty(t,"Mat3",{enumerable:!0,get:function(){return c(a).default}});var u=r(49);Object.defineProperty(t,"Mat4",{enumerable:!0,get:function(){return c(u).default}});var s=r(48);Object.defineProperty(t,"Quat",{enumerable:!0,get:function(){return c(s).default}});var l=r(47);function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Easing",{enumerable:!0,get:function(){return c(l).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gl=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(r(57)),o=u(r(41)),a=u(r(14));function u(e){return e&&e.__esModule?e:{default:e}}var s=new i.default,l=new o.default,c=new a.default(l),f=document.createElement("canvas"),h=f.getContext("webgl2"),m=function(){function e(t){var r=t.elementId,n=t.canvasId,i=t.width,o=t.height;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f.id=n||"canvas",f.width=i||window.innerWidth,f.height=o||window.innerHeight,h.viewport(0,0,h.canvas.width,h.canvas.height),document.getElementById(r||"root").appendChild(f)}return n(e,[{key:"createScene",value:function(e){l.getResource(e,function(e){s.buildFromResource(e,l);requestAnimationFrame(function e(){requestAnimationFrame(e);s.update(),c.renderScene(s)}),console.log(s)})}}]),e}();t.default=m,t.gl=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t}return n(e,[{key:"parse",value:function(){throw new Error("No parse method defined for Resource type "+this.constructor.name+".")}},{key:"remove",value:function(){throw new Error("No remove method defined for resource type "+this.constructor.name+".")}}]),e}();t.default=i},function(e,t,r){"use strict";(function(t){var n=r(0),i=r(35),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,s={adapter:("undefined"!=typeof XMLHttpRequest?u=r(8):void 0!==t&&(u=r(8)),u),transformRequest:[function(e,t){return i(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){s.headers[e]={}}),n.forEach(["post","put","patch"],function(e){s.headers[e]=n.merge(o)}),e.exports=s}).call(this,r(36))},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";var n=r(33);e.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o)}},function(e,t,r){"use strict";var n=r(0),i=r(34),o=r(32),a=r(31),u=r(30),s=r(7),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(29);e.exports=function(e){return new Promise(function(t,c){var f=e.data,h=e.headers;n.isFormData(f)&&delete h["Content-Type"];var m=new XMLHttpRequest,d="onreadystatechange",y=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in m||u(e.url)||(m=new window.XDomainRequest,d="onload",y=!0,m.onprogress=function(){},m.ontimeout=function(){}),e.auth){var p=e.auth.username||"",v=e.auth.password||"";h.Authorization="Basic "+l(p+":"+v)}if(m.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),m.timeout=e.timeout,m[d]=function(){if(m&&(4===m.readyState||y)&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in m?a(m.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?m.response:m.responseText,status:1223===m.status?204:m.status,statusText:1223===m.status?"No Content":m.statusText,headers:r,config:e,request:m};i(t,c,n),m=null}},m.onerror=function(){c(s("Network Error",e,null,m)),m=null},m.ontimeout=function(){c(s("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",m)),m=null},n.isStandardBrowserEnv()){var g=r(28),b=(e.withCredentials||u(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;b&&(h[e.xsrfHeaderName]=b)}if("setRequestHeader"in m&&n.forEach(h,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete h[t]:m.setRequestHeader(t,e)}),e.withCredentials&&(m.withCredentials=!0),e.responseType)try{m.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&m.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){m&&(m.abort(),c(e),m=null)}),void 0===f&&(f=null),m.send(f)})}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t||null,this.type=r}return n(e,[{key:"update",value:function(){throw new Error("No update method implemented for a component type "+this.type)}},{key:"remove",value:function(){throw new Error("No remove method implemented for a component type "+this.type)}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mesh=null,this.vertexOffset=t,this.vertexCount=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55);Object.defineProperty(t,"GeometryBatch",{enumerable:!0,get:function(){return n.GeometryBatch}}),Object.defineProperty(t,"LightBatch",{enumerable:!0,get:function(){return n.LightBatch}});var i=r(11);Object.defineProperty(t,"Geometry",{enumerable:!0,get:function(){return a(i).default}});var o=r(54);function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return a(o).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2);var a=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t,this.defines=n,this.shaderSource=r,this.program=null,this.attributeLocations={},this.uniformLocations={}}return i(e,null,[{key:"createShaderKey",value:function(e,t){return e+":"+t.map(function(e){var t=n(e,2);return t[0]+"="+t[1]}).join(",")}}]),i(e,[{key:"compileShaderProgram",value:function(){if(!this.shaderSource)throw new Error("No shadersource in shaderprogram");this.createProgram(this.createShader(o.gl.VERTEX_SHADER),this.createShader(o.gl.FRAGMENT_SHADER)),this.getAttributeLocations(),this.getUniformLocations()}},{key:"createShader",value:function(e){var t=this.shaderSource.createModifiedSource(e,this.defines),r=o.gl.createShader(e);if(o.gl.shaderSource(r,t),o.gl.compileShader(r),!o.gl.getShaderParameter(r,o.gl.COMPILE_STATUS))throw new Error("Error while creating shaderprogram: "+o.gl.getShaderInfoLog(r));return r}},{key:"createProgram",value:function(e,t){var r=o.gl.createProgram();if(o.gl.attachShader(r,e),o.gl.attachShader(r,t),o.gl.linkProgram(r),!o.gl.getProgramParameter(r,o.gl.LINK_STATUS))throw new Error("Error while linking program: "+o.gl.getProgramInfoLog(r));this.program=r}},{key:"getAttributeLocations",value:function(){for(var e={},t=o.gl.getProgramParameter(this.program,o.gl.ACTIVE_ATTRIBUTES),r=0;r<t;r+=1){var n=o.gl.getActiveAttrib(this.program,r).name;e[n]=o.gl.getAttribLocation(this.program,n)}this.attributeLocations=e}},{key:"getUniformLocations",value:function(){for(var e={},t=o.gl.getProgramParameter(this.program,o.gl.ACTIVE_UNIFORMS),r=0;r<t;r+=1){var n=o.gl.getActiveUniform(this.program,r).name;e[n]=o.gl.getUniformLocation(this.program,n)}this.uniformLocations=e}},{key:"remove",value:function(){}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),u=r(12),s=r(13),l=(n=s)&&n.__esModule?n:{default:n};new Map;var c=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.getResource("default.png",function(e){r.defaultTexture=e}),t.getResource("default.mtl",function(e){r.defaultMaterial=e}),this.resourceManager=t,this.boundScene=null,this.boundCamera=null,this.boundShaderProgram=null,this.boundMesh=null,this.boundMaterial=null,this.shaderProgramCache=new Map}return o(e,[{key:"renderScene",value:function(e){var t=this,r=[];e.walkEnabled(function(e){e.components.forEach(function(e){switch(e.type){case"Model":t.queueRenderable(e,r);break;case"Camera":!t.boundCamera&&e.active&&(t.boundCamera=e)}})}),a.gl.clearColor(.4,.4,.4,1),a.gl.clear(a.gl.COLOR_BUFFER_BIT|a.gl.DEPTH_BUFFER_BIT),this.renderPass(e,r)}},{key:"queueRenderable",value:function(e,t){if(e.mesh){var r=e.getGeometries(),n=e.getMaterials();if(r&&n)for(var i=0;i<r.length;i+=1)this.queueGeometry(r[i],n[i],e.node.transform.worldTransform,t)}}},{key:"queueGeometry",value:function(e,t,r,n){var i=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;if(c.geometry===e&&c.material===t)return void c.worldTransforms.push(r)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}n.push(new u.GeometryBatch(e,t,r))}},{key:"renderPass",value:function(e,t){a.gl.frontFace(a.gl.CCW),a.gl.enable(a.gl.CULL_FACE),a.gl.enable(a.gl.DITHER),a.gl.enable(a.gl.DEPTH_TEST),a.gl.depthMask(!0);var r=!0,n=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,l=s.material,c=s.geometry,f=c.mesh,h=c.vertexCount,m=c.vertexOffset;if(this.boundMaterial!==l){if(this.boundMaterial=l,this.bindShaderProgram(),!this.boundShaderProgram)continue;this.bindMesh(f),this.bindTextures(),this.bindScene(e),this.bindCamera()}this.drawIndividual(s,a.gl.TRIANGLES,h,a.gl.UNSIGNED_SHORT,m)}}catch(e){n=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw i}}this.boundScene=null,this.boundCamera=null,this.boundShaderProgram=null,this.boundMesh=null,this.boundMaterial=null}},{key:"bindShaderProgram",value:function(){var e=this.boundMaterial;if(e.shaderProgram)return this.boundShaderProgram=e.shaderProgram,void a.gl.useProgram(this.boundShaderProgram.program);var t=e.getDefines();if(t.length||(console.error("Material "+e.src+" is missing textures, added default colormap texture"),e.enableDefine("COLORMAP",1),e.addTexture("COLORMAP",this.defaultTexture),t=e.getDefines()),e.shaderSource){var r=l.default.createShaderKey(e.shaderSource.url,t),n=this.shaderProgramCache.get(r);n||((n=new l.default(r,e.shaderSource,t)).compileShaderProgram(),this.shaderProgramCache.set(n.key,n)),e.shaderProgram=n,this.boundShaderProgram=n,a.gl.useProgram(n.program)}else this.boundShaderProgram=null}},{key:"bindMesh",value:function(e){if(this.boundMesh=e,e.vao)a.gl.bindVertexArray(e.vao);else{e.vao=a.gl.createVertexArray(),a.gl.bindVertexArray(e.vao),a.gl.bindBuffer(a.gl.ARRAY_BUFFER,e.vertexBuffer),a.gl.bindBuffer(a.gl.ELEMENT_ARRAY_BUFFER,e.indiceBuffer);var t=this.boundShaderProgram.attributeLocations,r=e.attributes,n=e.vertexSize,i=!0,o=!1,u=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,f=c.name,h=c.vertices,m=c.offset;a.gl.enableVertexAttribArray(t[f]),a.gl.vertexAttribPointer(t[f],h,a.gl.FLOAT,!1,n,m)}}catch(e){o=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw u}}}}},{key:"bindTextures",value:function(){var e=this.boundShaderProgram.uniformLocations,t=this.boundMaterial.getTextures()||[["COLORMAP",this.defaultTexture]],r=0,n=!0,o=!1,u=void 0;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var c=s.value,f=i(c,2),h=f[0],m=f[1],d=void 0;switch(h){case"COLORMAP":d=e.u_colortexture;break;case"NORMALMAP":d=e.u_normaltexture;break;case"SPECULARMAP":d=e.u_speculartexture;break;default:throw new Error("No texture of type "+h+" has been specified. Implement!")}a.gl.activeTexture(a.gl.TEXTURE0+r),a.gl.bindTexture(a.gl.TEXTURE_2D,m.buffer),a.gl.uniform1i(d,r++)}}catch(e){o=!0,u=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw u}}}},{key:"bindScene",value:function(e){var t=this.boundShaderProgram.uniformLocations.u_time;a.gl.uniform1f(t,performance.now())}},{key:"bindCamera",value:function(){var e=this.boundCamera,t=this.boundShaderProgram.uniformLocations,r=t.u_view,n=t.u_perspectice,i=t.u_view_inverted;a.gl.uniformMatrix4fv(r,!1,e.view.toFloat32Array),a.gl.uniformMatrix4fv(n,!1,e.perspective.toFloat32Array),a.gl.uniformMatrix4fv(i,!1,e.view.invert.toFloat32Array)}},{key:"drawIndividual",value:function(e,t,r,n,i){var o=this.boundShaderProgram.uniformLocations,u=o.u_model,s=o.u_model_rotation,l=o.u_mvp,c=this.boundCamera,f=c.view,h=c.perspective,m=!0,d=!1,y=void 0;try{for(var p,v=e.worldTransforms[Symbol.iterator]();!(m=(p=v.next()).done);m=!0){var g=p.value;a.gl.uniformMatrix3fv(s,!1,g.toMat3.invert.transpose.toFloat32Array),a.gl.uniformMatrix4fv(u,!1,g.toFloat32Array),a.gl.uniformMatrix4fv(l,!1,h.mul(f.invert).mul(g).toFloat32Array),a.gl.drawElements(t,r,n,2*i)}}catch(e){d=!0,y=e}finally{try{!m&&v.return&&v.return()}finally{if(d)throw y}}}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),a=r(3),u=(n=a)&&n.__esModule?n:{default:n};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.buffer=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"parse",value:function(e){var t=this,r=new Image;r.onload=function(){t.buffer=function(e){var t=e.width,r=e.height,n=o.gl.createTexture();return o.gl.bindTexture(o.gl.TEXTURE_2D,n),o.gl.texImage2D(o.gl.TEXTURE_2D,0,o.gl.RGBA,t,r,0,o.gl.RGBA,o.gl.UNSIGNED_BYTE,e),t&t-1==0&&r&r-1==0?o.gl.generateMipmap(o.gl.TEXTURE_2D):(o.gl.texParameteri(o.gl.TEXTURE_2D,o.gl.TEXTURE_WRAP_S,o.gl.CLAMP_TO_EDGE),o.gl.texParameteri(o.gl.TEXTURE_2D,o.gl.TEXTURE_WRAP_T,o.gl.CLAMP_TO_EDGE),o.gl.texParameteri(o.gl.TEXTURE_2D,o.gl.TEXTURE_MIN_FILTER,o.gl.LINEAR)),n}(r)},r.src="data:image/png;base64,"+e}},{key:"remove",value:function(){o.gl.deleteBuffer(this.buffer),this.buffer=null}}]),t}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),u=r(3),s=(n=u)&&n.__esModule?n:{default:n};var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.data=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"parse",value:function(e){this.data=e}},{key:"createModifiedSource",value:function(e,t){var r="#version 300 es\n";if(!e)throw new Error("Type of shader is invalid: "+e);return r+=e===a.gl.VERTEX_SHADER?"#define VERTEX\n":"#define FRAGMENT\n",(r+=t.map(function(e){var t=i(e,2),r=t[0],n=t[1];return"#define "+r+(n?"="+n+"\n":"\n")}).join(""))+"#line 1\n"+this.data}},{key:"remove",value:function(){this.data=null}}]),t}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(3),a=(n=o)&&n.__esModule?n:{default:n};var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.data=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"parse",value:function(e){this.data=e}},{key:"remove",value:function(){}}]),t}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(2),a=l(r(3)),u=l(r(11)),s=r(1);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.materialSources=[],r.geometries=[],r.attributes=[],r.vertexSize=null,r.vertexBuffer=null,r.indiceBuffer=null,r.vao=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"parse",value:function(e){var t,r=this,i=[],a=[],l=[],f=[],h=[],m=[],d=[],y=[],p=[],v=[],g=[],b=/^(\w+) (.+)$/gm,w=/-?\d+\.\d+/g,_=/\d+/g,x="";if("object"===(void 0===e?"undefined":n(e))){for(var k=e.vertexData.length,T=0;T<k;T+=2)i.push(e.vertexData[T+0]),a.push(e.vertexData[T+1]);m.push.apply(m,c(e.indices))}else for(var E={v:function(e){i.push(new(Function.prototype.bind.apply(s.Vec3,[null].concat(c(e[2].match(w).map(parseFloat))))))},vt:function(e){a.push(new(Function.prototype.bind.apply(s.Vec2,[null].concat(c(e[2].match(w).map(parseFloat))))))},vn:function(e){l.push((new(Function.prototype.bind.apply(s.Vec3,[null].concat(c(e[2].match(w).map(parseFloat)))))).normalize)},f:function(e){m.push.apply(m,c(e[2].match(_).map(function(e){return parseInt(e,10)-1})))},g:function(e){m.push(e[2]),d.push(e[2])},"#":function(e){},o:function(e){},usemtl:function(e){},s:function(e){},mtllib:function(e){}};x=b.exec(e);)try{E[x[1]](x)}catch(e){throw new Error("Failed at parsing mesh file row.",x,e)}i.length&&p.push("a_position");var A=!!a.length;if(A&&p.push("a_texcoord"),l.length||function(e,t,r,n){if(t&&t.length>0)if(n)for(var i=t.length/2*3,o=0;o<i;o+=9){var a=o/9;e.push(r[t[o+0]].getNormal(r[t[o+2]],r[t[o+4]])),t.splice(o+2,0,a),t.splice(o+5,0,a),t.splice(o+8,0,a)}else for(var u=2*t.length,s=0;s<u;s+=6){var l=s/6;e.push(r[t[s+0]].getNormal(r[t[s+1]],r[t[s+2]])),t.splice(s+1,0,l),t.splice(s+3,0,l),t.splice(s+5,0,l)}else for(var c=r.length,f=0;f<c;f+=3){var h=r[f+0].getNormal(r[f+1],r[f+2]);e.push(h,h,h)}}(l,m,i,A),p.push("a_normal"),function(e,t,r){var n=0,i=r?9:6,o=/[a-z_]+(?:\.\w+)?/i;o.test(t[0])&&t.splice(0,1),e.push(new u.default(0,null));for(var a=0;a<t.length;a+=i)o.test(t[a])?(t.splice(a,1),e[e.length-1].vertexCount=3*n,e.push(new u.default(3*a,null)),n=0,a-=1):n+=1;e[e.length-1].vertexCount=3*n}(y,m,A),y.forEach(function(e){e.mesh=r}),A&&(!function(e,t,r,n,i){for(var o=i.length/3*5,a=0;a<o;a+=15){var u=r[i[a+0]],l=r[i[a+3]],c=r[i[a+6]],f=n[i[a+1]],h=n[i[a+4]],m=n[i[a+7]],d=l.x-u.x,y=c.x-u.x,p=l.y-u.y,v=c.y-u.y,g=l.z-u.z,b=c.z-u.z,w=h.x-f.x,_=m.x-f.x,x=h.y-f.y,k=m.y-f.y,T=1/(w*k-_*x),E=new s.Vec3((k*d-x*y)*T,(k*p-x*v)*T,(k*g-x*b)*T).normalize,A=new s.Vec3((w*y-_*d)*T,(w*v-_*p)*T,(w*b-_*g)*T).normalize;e.push(E),t.push(A);var O=a/15;i.splice(a+3,0,O,O),i.splice(a+8,0,O,O),i.splice(a+13,0,O,O)}}(f,h,i,a,m),p.push("a_tangent","a_bitangent")),a)for(var O=m.length,S=0;S<O;S+=5)v.push.apply(v,c(i[m[S+0]].toArray)),v.push.apply(v,c(a[m[S+1]].toArray)),v.push.apply(v,c(l[m[S+2]].toArray)),v.push.apply(v,c(f[m[S+3]].toArray)),v.push.apply(v,c(h[m[S+4]].toArray)),g.push(S/5);else for(var P=m.length,R=0;R<P;R+=2)v.push.apply(v,c(i[m[R+0]].toArray)),v.push.apply(v,c(l[m[R+2]].toArray)),g.push(R/2);var M=function(e,t){var r=o.gl.createBuffer();o.gl.bindBuffer(o.gl.ARRAY_BUFFER,r),o.gl.bufferData(o.gl.ARRAY_BUFFER,e,o.gl.STATIC_DRAW);var n=o.gl.createBuffer();return o.gl.bindBuffer(o.gl.ELEMENT_ARRAY_BUFFER,n),o.gl.bufferData(o.gl.ELEMENT_ARRAY_BUFFER,t,o.gl.STATIC_DRAW),{vertexBuffer:r,indiceBuffer:n}}(new Float32Array(v),new Uint16Array(g));(t=this.materialSources).push.apply(t,c(d.map(function(e){return e}))),this.geometries=y,this.attributes=function(e){var t=[],r=0;return e.forEach(function(e){switch(e){case"a_position":t.push({name:"a_position",vertices:3,offset:r}),r+=12;break;case"a_texcoord":t.push({name:"a_texcoord",vertices:2,offset:r}),r+=8;break;case"a_normal":t.push({name:"a_normal",vertices:3,offset:r}),r+=12;break;case"a_tangent":t.push({name:"a_tangent",vertices:3,offset:r}),r+=12;break;case"a_bitangent":t.push({name:"a_bitangent",vertices:3,offset:r}),r+=12;break;default:throw new Error("Unknown mesh attribute name: "+e)}}),t}(p),this.vertexSize=function(e){var t=0;return e.forEach(function(e){switch(e){case"a_position":t+=12;break;case"a_texcoord":t+=8;break;case"a_normal":case"a_tangent":case"a_bitangent":t+=12;break;default:throw new Error("Unknown mesh attribute: "+e)}}),t}(p),this.vertexBuffer=M.vertexBuffer,this.indiceBuffer=M.indiceBuffer}},{key:"remove",value:function(){this.geometries.forEach(function(e){e.mesh=null}),this.geometries.length=0,this.attributes.length=0,o.gl.deleteBuffer(this.vertexBuffer),o.gl.deleteBuffer(this.indiceBuffer),o.gl.deleteBuffer(this.vao),this.vertexBuffer=null,this.indiceBuffer=null,this.vao=null}}]),t}();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(3),u=(n=a)&&n.__esModule?n:{default:n};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.shaderSource=null,r.shaderProgram=null,r.textures=new Map,r.defines=new Map,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),o(t,[{key:"parse",value:function(e){var t=this;return"object"!==(void 0===e?"undefined":i(e))&&JSON.parse(e),function(r){r.getResource(e.shaderSource,function(e){t.shaderSource=e});var n=!0,i=!1,o=void 0;try{for(var a,u=e.defines[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;t.enableDefine(s,null)}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}var l=function(e){var n=e.define,i=e.src;e.value;r.getResource(i,function(e){t.addTexture(n,e)})},c=!0,f=!1,h=void 0;try{for(var m,d=e.textures[Symbol.iterator]();!(c=(m=d.next()).done);c=!0){l(m.value)}}catch(e){f=!0,h=e}finally{try{!c&&d.return&&d.return()}finally{if(f)throw h}}}}},{key:"addTexture",value:function(e,t){this.textures.set(e,t)}},{key:"getTextures",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var i,o=this.textures[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return e.length?e:null}},{key:"enableDefine",value:function(e,t){this.defines.set(e,t)}},{key:"getDefines",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var i,o=this.defines[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return e.length?e:null}},{key:"remove",value:function(){this.shaderSource=null,this.shaderProgram=null,this.textures.clear(),this.defines.clear()}}]),t}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19);Object.defineProperty(t,"Material",{enumerable:!0,get:function(){return s(n).default}});var i=r(18);Object.defineProperty(t,"Mesh",{enumerable:!0,get:function(){return s(i).default}});var o=r(17);Object.defineProperty(t,"SceneSource",{enumerable:!0,get:function(){return s(o).default}});var a=r(16);Object.defineProperty(t,"ShaderSource",{enumerable:!0,get:function(){return s(a).default}});var u=r(15);function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Texture",{enumerable:!0,get:function(){return s(u).default}})},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";var n=r(5);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";var n=r(0),i=r(25),o=r(6),a=r(4),u=r(24),s=r(23);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.baseURL&&!u(e.url)&&(e.url=s(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return l(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(l(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,o,a){var u=[];u.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),n.isString(i)&&u.push("path="+i),n.isString(o)&&u.push("domain="+o),!0===a&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(){this.message="String contains an invalid character"}i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,o=String(e),a="",u=0,s=n;o.charAt(0|u)||(s="=",u%1);a+=s.charAt(63&t>>8-u%1*8)){if((r=o.charCodeAt(u+=.75))>255)throw new i;t=t<<8|r}return a}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,a={};return e?(n.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}}),a):a}},function(e,t,r){"use strict";var n=r(0);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var a=[];n.forEach(t,function(e,t){null!==e&&void 0!==e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e}},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,l=[],c=!1,f=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&m())}function m(){if(!c){var e=u(h);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||c||u(m)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(4),i=r(0),o=r(27),a=r(26);function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],function(e){u.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){u.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=u},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var n=r(0),i=r(9),o=r(37),a=r(4);function u(e){var t=new o(e),r=i(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var s=u(a);s.Axios=o,s.create=function(e){return u(n.merge(a,e))},s.Cancel=r(5),s.CancelToken=r(22),s.isCancel=r(6),s.all=function(e){return Promise.all(e)},s.spread=r(21),e.exports=s,e.exports.default=s},function(e,t,r){e.exports=r(39)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(40),a=(n=o)&&n.__esModule?n:{default:n},u=r(20);a.default.defaults.baseURL=window.location.origin+"/api/glib",a.default.defaults.headers.common.accept="image/png";var s=/^\.(?:obj|mtl|png|cnf|glsl)$/,l=function(e){if(!e)return new Error("No url defined.");var t=e.lastIndexOf(".");if(-1===t)return new Error("No file extension in url. Url: "+e);var r=e.slice(t);return function(e){return s.test(e)}(r)?void 0:new Error("Illegal file extension: "+r)},c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache=new Map,this.loadQueue=new Map,this.loading=!1,this.onLoadDone=null}return i(e,[{key:"getResource",value:function(e,t){var r=l(e);if(r)throw new Error(r);if(this.cache.has(e)){var n=this.cache.get(e);return t&&t(n),n}if(this.loadQueue.has(e)){var i=this.loadQueue.get(e);return t&&(i.callbacks.push(t),this.loadQueue.set(e,i)),i.resource}var o=function(e){switch(e.slice(e.lastIndexOf("."))){case".obj":return new u.Mesh(e);case".mtl":return new u.Material(e);case".png":return new u.Texture(e);case".glsl":return new u.ShaderSource(e);case".cnf":return new u.SceneSource(e);default:throw new Error("Unable to find resource with url: "+e)}}(e),a=t?[t]:[];return this.loadQueue.set(o.url,{resource:o,callbacks:a}),this.loadNextResource(),o}},{key:"loadNextResource",value:function(){var e=this;if(!this.loading){var t=this.loadQueue.values().next().value;if(t){var r=t.resource,n=t.callbacks;this.loading=!0,a.default.get(r.url).then(function(t){e.loadQueue.delete(r.url),e.cache.set(r.url,r);var i=r.parse(t.data);i&&i(e),n.forEach(function(e){e(r)}),e.loading=!1,setTimeout(function(){e.loadNextResource()},500)}).catch(function(e){console.error(e)})}else this.onLoadDone&&this.onLoadDone()}}},{key:"deleteResource",value:function(e){e.remove(),this.cache.delete(e.url),this.loadQueue.delete(e.url)}},{key:"deleteAllResources",value:function(){this.loading=!0,this.cache.forEach(function(e){e.delete()}),this.loadQueue.forEach(function(e){e.delete()}),this.cache.clear(),this.loadQueue.clear(),this.loading=!1}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(42);Object.defineProperty(t,"firstLetterToUpper",{enumerable:!0,get:function(){return(e=n,e&&e.__esModule?e:{default:e}).default;var e}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(10),a=(n=o)&&n.__esModule?n:{default:n},u=r(1);var s=Math.PI,l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"Camera"));r.active=!0,r.inControl=!0;var n=window.innerWidth/window.innerHeight;return r._perspective=u.Mat4.perspective(.25*s,n,.01,1e3),r._ortographic=u.Mat4.orthographic(-n,n,-1,1,.01,1e3),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"resize",value:function(){var e=window.innerWidth/window.innerHeight;this._perspective=u.Mat4.perspective(.25*s,e,.01,1e3),this._ortographic=u.Mat4.orthographic(-e,e,-1,1,.01,1e3)}},{key:"update",value:function(){}},{key:"remove",value:function(){this.node.removeComponent(this)}},{key:"view",get:function(){return this.node.transform.worldTransform}},{key:"perspective",get:function(){return this._perspective.clone}},{key:"ortographic",get:function(){return this._ortographic.clone}}]),t}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(10),a=(n=o)&&n.__esModule?n:{default:n};var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"Model"));return r.mesh=null,r.materials=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"addMesh",value:function(e){this.mesh=e}},{key:"addMaterial",value:function(e){this.materials.push(e)}},{key:"getGeometries",value:function(){return this.mesh&&this.mesh.geometries||null}},{key:"getMaterials",value:function(){return this.materials.length&&this.materials||null}},{key:"update",value:function(){}},{key:"remove",value:function(){this.node.removeComponent(this),this.mesh=null,this.materials.length=0}}]),t}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(45);Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return o(n).default}});var i=r(44);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return o(i).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(){throw function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new Error("You should not use Easing contructor...")}return n(e,null,[{key:"linear",value:function(e){return e}},{key:"easeInQuad",value:function(e){return e*e}},{key:"easeOutQuad",value:function(e){return e*(2-e)}},{key:"easeInOutQuad",value:function(e){return e<.5?2*e*e:(4-2*e)*e-1}},{key:"easeInCubic",value:function(e){return e*e*e}},{key:"easeOutCubic",value:function(e){return(e-=1)*e*e+1}},{key:"easeInOutCubic",value:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}},{key:"easeInQuart",value:function(e){return e*e*e*e}},{key:"easeOutQuart",value:function(e){return 1-(e-=1)*e*e*e}},{key:"easeInOutQuart",value:function(e){return e<.5?8*e*e*e*e:1-8*(e-=1)*e*e*e}},{key:"easeInQuint",value:function(e){return e*e*e*e*e}},{key:"easeOutQuint",value:function(e){return 1+(e-=1)*e*e*e*e}},{key:"easeInOutQuint",value:function(e){return e<.5?16*e*e*e*e*e:1+16*(e-=1)*e*e*e*e}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1);var o=Math.sin,a=Math.cos,u=Math.acos,s=Math.abs,l=Math.sqrt,c=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.w=t||0,this.x=r||0,this.y=n||0,this.z=i||0}return n(e,null,[{key:"fromArray",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))))}},{key:"fromEulers",value:function(t,r,n){var i=a(.5*r),u=a(.5*n),s=a(.5*t),l=o(.5*r),c=o(.5*n),f=o(.5*t);return new e(i*u*s-l*c*f,i*u*f+l*c*s,l*u*s+i*c*f,i*c*s-l*u*f).normalize}},{key:"fromAxisAngle",value:function(t,r){var n=1/t.len,i=o(r/2);return new e(a(r/2),i*t.x*n,i*t.y*n,i*t.z*n).normalize}},{key:"fromRotation",value:function(t,r){var n=t.add(r),i=t.cross(n);return new e(t.dot(n),i.x,i.y,i.z).normalize}},{key:"identity",get:function(){return new e(1,0,0,0)}},{key:"up",get:function(){return new e(.707,.707,0,0)}},{key:"down",get:function(){return new e(.707,-.707,0,0)}},{key:"left",get:function(){return new e(.707,0,.707,0)}},{key:"right",get:function(){return new e(.707,0,-.707,0)}},{key:"backward",get:function(){return new e(0,0,1,0)}},{key:"upsideDown",get:function(){return new e(0,0,0,1)}},{key:"tiltLeft",get:function(){return new e(.707,0,0,.707)}},{key:"tiltRight",get:function(){return new e(.707,0,0,-.707)}}]),n(e,[{key:"mul",value:function(t){var r=this.w,n=this.x,i=this.y,o=this.z,a=t.w,u=t.x,s=t.y,l=t.z;return new e(r*a-n*u-i*s-o*l,n*a+r*u+i*l-o*s,i*a+r*s+o*u-n*l,o*a+r*l+n*s-i*u).normalize}},{key:"dot",value:function(e){return this.w*e.w+this.x*e.x+this.y*e.y+this.z*e.z}},{key:"cross",value:function(e){throw new Error("Quaternion cross not implemented "+e)}},{key:"scaleRotation",value:function(t){var r=u(this.w)*t,n=new i.Vec3(this.x,this.y,this.z).scale(o(r));return new e(a(r),n.x,n.y,n.z)}},{key:"lerp",value:function(e,t){return t>=1?e:this.scaleRotation(1-t).multiply(e.scaleRotation(t))}},{key:"nlerp",value:function(e,t){return this.lerp(e,t).normalize}},{key:"slerp",value:function(t,r){if(r<=0)return this;if(r>=1)return t;var n=this.dot(t);if(s(n)>=1)return this;n<0&&(t.w=-t.w,t.x=-t.x,t.y=-t.y,t.z=-t.z,n=-n);var i=l(1-n*n);if(s(i)<.001)return new e(.5*(this.w+t.w),.5*(this.x+t.x),.5*(this.y+t.y),.5*(this.z+t.z)).normalize;var a=u(n),c=o((1-r)*a)/i,f=o(r*a)/i;return new e(this.w*c+t.w*f,this.x*c+t.x*f,this.y*c+t.y*f,this.z*c+t.z*f).normalize}},{key:"clone",get:function(){return new e(this.w,this.x,this.y,this.z)}},{key:"toArray",get:function(){return[this.w,this.x,this.y,this.z]}},{key:"toMat3",get:function(){var e=this.w,t=this.x,r=this.y,n=this.z,o=t*e,a=t*t,u=t*r,s=t*n,l=r*e,c=r*r,f=r*n,h=n*e,m=n*n;return new i.Mat3(1-2*(c+m),2*(u-h),2*(s+l),2*(u+h),1-2*(a+m),2*(f-o),2*(s-l),2*(f+o),1-2*(a+c))}},{key:"toMat4",get:function(){return this.toMat3.toMat4}},{key:"toEulers",get:function(){throw new Error("Quaternion toEuler not implemented")}},{key:"len",get:function(){return l(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"lenSqrt",get:function(){return this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z}},{key:"conjugate",get:function(){return new e(this.w,-this.x,-this.y,-this.z)}},{key:"normalize",get:function(){var t=l(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);return t>0?(t=1/t,new e(this.w*t,this.x*t,this.y*t,this.z*t)):new e(1,0,0,0)}},{key:"invert",get:function(){var t=1/this.len;return new e(this.w*t,-this.x*t,-this.y*t,-this.z*t)}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1);var o=Math.sin,a=Math.cos,u=Math.tan,s=function(){function e(t,r,n,i,o,a,u,s,l,c,f,h,m,d,y,p){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.m00=t||0,this.m01=r||0,this.m02=n||0,this.m03=i||0,this.m10=o||0,this.m11=a||0,this.m12=u||0,this.m13=s||0,this.m20=l||0,this.m21=c||0,this.m22=f||0,this.m23=h||0,this.m30=m||0,this.m31=d||0,this.m32=y||0,this.m33=p||0}return n(e,null,[{key:"fromArray",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))))}},{key:"perspective",value:function(t,r,n,i){var o=1/u(t/2),a=1/(n-i);return new e(o/r,0,0,0,0,o,0,0,0,0,(n+i)*a,-1,0,0,n*i*a*2,0)}},{key:"orthographic",value:function(t,r,n,i,o,a){var u=1/(t-r),s=1/(n-i),l=1/(o-a);return new e(2*u,0,0,0,0,2*s,0,0,0,0,2*l,0,(t+r)*u,(i+n)*s,(a+o)*l,1)}},{key:"translate",value:function(t,r,n){return new e(1,0,0,0,0,1,0,0,0,0,1,0,t,r,n,1)}},{key:"rotateX",value:function(t){var r=a(t),n=o(t);return new e(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1)}},{key:"rotateY",value:function(t){var r=a(t),n=o(t);return new e(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1)}},{key:"rotateZ",value:function(t){var r=a(t),n=o(t);return new e(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1)}},{key:"scale",value:function(t,r,n){return new e(t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1)}},{key:"identity",get:function(){return new e(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}}]),n(e,[{key:"lookAt",value:function(t,r){var n=this.sub(t).normalize,i=r.cross(n),o=n.cross(i);return new e(i.x,i.y,i.z,0,o.x,o.y,o.z,0,n.x,n.y,n.z,0,this.x,this.y,this.z,1)}},{key:"add",value:function(t){return new e(this.m00+t.m00,this.m01+t.m01,this.m02+t.m02,this.m03+t.m03,this.m10+t.m10,this.m11+t.m11,this.m12+t.m12,this.m13+t.m13,this.m20+t.m20,this.m21+t.m21,this.m22+t.m22,this.m23+t.m23,this.m30+t.m30,this.m31+t.m31,this.m32+t.m32,this.m33+t.m33)}},{key:"sub",value:function(t){return new e(this.m00-t.m00,this.m01-t.m01,this.m02-t.m02,this.m03-t.m03,this.m10-t.m10,this.m11-t.m11,this.m12-t.m12,this.m13-t.m13,this.m20-t.m20,this.m21-t.m21,this.m22-t.m22,this.m23-t.m23,this.m30-t.m30,this.m31-t.m31,this.m32-t.m32,this.m33-t.m33)}},{key:"mul",value:function(t){return new e(t.m00*this.m00+t.m01*this.m10+t.m02*this.m20+t.m03*this.m30,t.m00*this.m01+t.m01*this.m11+t.m02*this.m21+t.m03*this.m31,t.m00*this.m02+t.m01*this.m12+t.m02*this.m22+t.m03*this.m32,t.m00*this.m03+t.m01*this.m13+t.m02*this.m23+t.m03*this.m33,t.m10*this.m00+t.m11*this.m10+t.m12*this.m20+t.m13*this.m30,t.m10*this.m01+t.m11*this.m11+t.m12*this.m21+t.m13*this.m31,t.m10*this.m02+t.m11*this.m12+t.m12*this.m22+t.m13*this.m32,t.m10*this.m03+t.m11*this.m13+t.m12*this.m23+t.m13*this.m33,t.m20*this.m00+t.m21*this.m10+t.m22*this.m20+t.m23*this.m30,t.m20*this.m01+t.m21*this.m11+t.m22*this.m21+t.m23*this.m31,t.m20*this.m02+t.m21*this.m12+t.m22*this.m22+t.m23*this.m32,t.m20*this.m03+t.m21*this.m13+t.m22*this.m23+t.m23*this.m33,t.m30*this.m00+t.m31*this.m10+t.m32*this.m20+t.m33*this.m30,t.m30*this.m01+t.m31*this.m11+t.m32*this.m21+t.m33*this.m31,t.m30*this.m02+t.m31*this.m12+t.m32*this.m22+t.m33*this.m32,t.m30*this.m03+t.m31*this.m13+t.m32*this.m23+t.m33*this.m33)}},{key:"clone",get:function(){return new e(this.m00,this.m01,this.m02,this.m03,this.m10,this.m11,this.m12,this.m13,this.m20,this.m21,this.m22,this.m23,this.m30,this.m31,this.m32,this.m33)}},{key:"toArray",get:function(){return[this.m00,this.m01,this.m02,this.m03,this.m10,this.m11,this.m12,this.m13,this.m20,this.m21,this.m22,this.m23,this.m30,this.m31,this.m32,this.m33]}},{key:"toFloat32Array",get:function(){return new Float32Array([this.m00,this.m01,this.m02,this.m03,this.m10,this.m11,this.m12,this.m13,this.m20,this.m21,this.m22,this.m23,this.m30,this.m31,this.m32,this.m33])}},{key:"toMat3",get:function(){return new i.Mat3(this.m00,this.m01,this.m02,this.m10,this.m11,this.m12,this.m20,this.m21,this.m22)}},{key:"toQuat",get:function(){return this.toMat3.toQuat}},{key:"invert",get:function(){var t=this.m00,r=this.m01,n=this.m02,i=this.m03,o=this.m10,a=this.m11,u=this.m12,s=this.m13,l=this.m20,c=this.m21,f=this.m22,h=this.m23,m=this.m30,d=this.m31,y=this.m32,p=this.m33,v=a*f*p-a*h*y-c*u*p+c*s*y+d*u*h-d*s*f,g=-o*f*p+o*h*y+l*u*p-l*s*y-m*u*h+m*s*f,b=o*c*p-o*h*d-l*a*p+l*s*d+m*a*h-m*s*c,w=-o*c*y+o*f*d+l*a*y-l*u*d-m*a*f+m*u*c,_=t*v+r*g+n*b+i*w;if(0===_)throw new Error("Cannot invert matrix "+this);return new e((_=1/_)*v,_*-r*f*p+r*h*y+c*n*p-c*i*y-d*n*h+d*i*f,_*r*u*p-r*s*y-a*n*p+a*i*y+d*n*s-d*i*u,_*-r*u*h+r*s*f+a*n*h-a*i*f-c*n*s+c*i*u,_*g,_*t*f*p-t*h*y-l*n*p+l*i*y+m*n*h-m*i*f,_*-t*u*p+t*s*y+o*n*p-o*i*y-m*n*s+m*i*u,_*t*u*h-t*s*f-o*n*h+o*i*f+l*n*s-l*i*u,_*b,_*-t*c*p+t*h*d+l*r*p-l*i*d-m*r*h+m*i*c,_*t*a*p-t*s*d-o*r*p+o*i*d+m*r*s-m*i*a,_*-t*a*h+t*s*c+o*r*h-o*i*c-l*r*s+l*i*a,_*w,_*t*c*y-t*f*d-l*r*y+l*n*d+m*r*f-m*n*c,_*-t*a*y+t*u*d+o*r*y-o*n*d-m*r*u+m*n*a,_*t*a*f-t*u*c-o*r*f+o*n*c+l*r*u-l*n*a)}},{key:"transpose",get:function(){return new e(this.m00,this.m10,this.m20,this.m30,this.m01,this.m11,this.m21,this.m31,this.m02,this.m12,this.m22,this.m32,this.m03,this.m13,this.m23,this.m33)}},{key:"translation",get:function(){return new i.Vec3(this.m30,this.m31,this.m32)}},{key:"scale",get:function(){return new i.Vec3(new i.Vec3(this.m00,this.m10,this.m20).len,new i.Vec3(this.m01,this.m11,this.m21).len,new i.Vec3(this.m02,this.m12,this.m22).len)}},{key:"rotation",get:function(){return new i.Mat3(this.m00,this.m01,this.m02,this.m10,this.m11,this.m12,this.m20,this.m21,this.m22)}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1);var o=Math.sqrt,a=function(){function e(t,r,n,i,o,a,u,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.m00=t,this.m01=r,this.m02=n,this.m10=i,this.m11=o,this.m12=a,this.m20=u,this.m21=s,this.m22=l}return n(e,null,[{key:"fromArray",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))))}},{key:"identity",get:function(){return new e(1,0,0,0,1,0,0,0,1)}}]),n(e,[{key:"multiplyVector",value:function(t){return new e(this.m00*t.x+this.m01*t.y+this.m02*t.z,this.m10*t.x+this.m11*t.y+this.m12*t.z,this.m20*t.x+this.m21*t.y+this.m22*t.z)}},{key:"add",value:function(t){return new e(this.m00+t.m00,this.m01+t.m01,this.m02+t.m02,this.m10+t.m10,this.m11+t.m11,this.m12+t.m12,this.m20+t.m20,this.m21+t.m21,this.m22+t.m22)}},{key:"sub",value:function(t){return new e(this.m00-t.m00,this.m01-t.m01,this.m02-t.m02,this.m10-t.m10,this.m11-t.m11,this.m12-t.m12,this.m20-t.m20,this.m21-t.m21,this.m22-t.m22)}},{key:"mul",value:function(t){var r=this.m01,n=this.m02,i=this.m03,o=this.m11,a=this.m12,u=this.m13,s=this.m21,l=this.m22,c=this.m23,f=t.m01,h=t.m02,m=t.m03,d=t.m11,y=t.m12,p=t.m13,v=t.m21,g=t.m22,b=t.m23;return new e(r*f+n*d+i*v,r*h+n*y+i*g,r*m+n*p+i*b,o*f+a*d+u*v,o*h+a*y+u*g,o*m+a*p+u*b,s*f+l*d+c*v,s*h+l*y+c*g,s*m+l*p+c*b)}},{key:"clone",get:function(){return new e(this.m00,this.m01,this.m02,this.m10,this.m11,this.m12,this.m20,this.m21,this.m22)}},{key:"toArray",get:function(){return[this.m00,this.m01,this.m02,this.m10,this.m11,this.m12,this.m20,this.m21,this.m22]}},{key:"toFloat32Array",get:function(){return new Float32Array([this.m00,this.m01,this.m02,this.m10,this.m11,this.m12,this.m20,this.m21,this.m22])}},{key:"toMat4",get:function(){return new i.Mat4(this.m00,this.m01,this.m02,0,this.m10,this.m11,this.m12,0,this.m20,this.m21,this.m22,0,0,0,0,1)}},{key:"toQuat",get:function(){var e=this.m00+this.m11+this.m22,t=void 0;return e>0?(t=.5/o(e+1),new i.Quat(.25/t,(this.m21-this.m12)*t,(this.m02-this.m20)*t)):this.m00>this.m11&&this.m00>this.m22?(t=2*o(1+this.m00-this.m11-this.m22),new i.Quat((this.m21-this.m12)/t,.25*t,(this.m01+this.m10)/t,(this.m02+this.m20)/t)):this.m11>this.m22?(t=2*o(1+this.m11-this.m00-this.m22),new i.Quat((this.m02-this.m20)/t,(this.m01+this.m10)/t,.25*t,(this.m12+this.m21)/t)):(t=2*o(1+this.m22-this.m00-this.m11),new i.Quat((this.m10-this.m01)/t,(this.m02+this.m20)/t,(this.m12+this.m21)/t))}},{key:"invert",get:function(){var t=this.m00,r=this.m01,n=this.m02,i=this.m10,o=this.m11,a=this.m12,u=this.m20,s=this.m21,l=this.m22,c=l*o-a*s,f=-l*i+a*u,h=s*i-o*u,m=t*c+r*f+n*h;if(0===m)throw new Error("Cannot invert matrix "+this);return new e(c*(m=1/m),(-l*r+n*s)*m,(a*r-n*o)*m,f*m,(l*t-n*u)*m,(-a*t+n*i)*m,h*m,(-s*t+r*u)*m,(o*t-r*i)*m)}},{key:"transpose",get:function(){return new e(this.m00,this.m10,this.m20,this.m01,this.m11,this.m21,this.m02,this.m12,this.m22)}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=Math.sqrt,o=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t||0,this.y=r||0,this.z=n||0}return n(e,null,[{key:"fromArray",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))))}},{key:"fromQuat",value:function(t){var r=this.x,n=this.y,i=this.z,o=t.x,a=t.y,u=t.z,s=t.w,l=s*r+a*i-u*n,c=s*n+u*r-o*i,f=s*i+o*n-a*r,h=-o*r-a*n-u*i;return new e(l*s+h*-o+c*-u-f*-a,c*s+h*-a+f*-o-l*-u,f*s+h*-u+l*-a-c*-o)}},{key:"fromMat4",value:function(t){return new e(t.a14+t.a11*this.x+t.a12*this.y+t.a13*this.z,t.a24+t.a21*this.x+t.a22*this.y+t.a23*this.z,t.a34+t.a31*this.x+t.a32*this.y+t.a33*this.z)}},{key:"zero",get:function(){return new e(0,0,0)}},{key:"up",get:function(){return new e(0,1,0)}},{key:"down",get:function(){return new e(0,-1,0)}},{key:"left",get:function(){return new e(-1,0,0)}},{key:"right",get:function(){return new e(1,0,0)}},{key:"forward",get:function(){return new e(0,0,1)}},{key:"backward",get:function(){return new e(0,0,-1)}},{key:"one",get:function(){return new e(1,1,1)}}]),n(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)}},{key:"sub",value:function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t,this.z*t)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"cross",value:function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}},{key:"lerp",value:function(t,r){return new e(this.x+(t.x-this.x)*r,this.y+(t.y-this.y)*r,this.z+(t.z-this.z)*r)}},{key:"getNormal",value:function(e,t){return this.sub(e).cross(this.sub(t)).normalize}},{key:"getAngle",value:function(e){return this.normalize.dot(e.normalize)}},{key:"forward",get:function(){return this.normalize}},{key:"backward",get:function(){return this.normalize.invert}},{key:"left",get:function(){return this.normalize.cross(e.up).normalize}},{key:"right",get:function(){return this.normalize.cross(e.up).normalize.invert}},{key:"down",get:function(){return this.normalize.cross(this.left).normalize}},{key:"up",get:function(){return this.normalize.cross(this.left).normalize.invert}},{key:"toArray",get:function(){return[this.x,this.y,this.z]}},{key:"toFloat32Array",get:function(){return new Float32Array([this.x,this.y,this.z])}},{key:"clone",get:function(){return new e(this.x,this.y,this.z)}},{key:"len",get:function(){return i(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"lenSqrt",get:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"normalize",get:function(){var t=i(this.x*this.x+this.y*this.y+this.z*this.z);return t>0?(t=1/t,new e(this.x*t,this.y*t,this.z*t)):new e(0,0,0)}},{key:"invert",get:function(){return new e(-this.x,-this.y,-this.z)}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=Math.sqrt,o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t||0,this.y=r||0}return n(e,null,[{key:"fromArray",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))))}},{key:"zero",get:function(){return new e(0,0)}},{key:"up",get:function(){return new e(0,1)}},{key:"down",get:function(){return new e(0,-1)}},{key:"left",get:function(){return new e(-1,0)}},{key:"right",get:function(){return new e(1,0)}}]),n(e,[{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"sub",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"getAngle",value:function(e){return this.normalize.dot(e.normalize)}},{key:"invert",value:function(){return new e(-this.x,-this.y)}},{key:"toArray",get:function(){return[this.x,this.y]}},{key:"toFloat32Array",get:function(){return new Float32Array([this.x,this.y])}},{key:"clone",get:function(){return new e(this.x,this.y)}},{key:"len",get:function(){return i(this.x*this.x+this.y*this.y)}},{key:"lenSqrt",get:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",get:function(){var t=i(this.x*this.x+this.y*this.y);return t>0?(t=1/t,new e(this.x*t,this.y*t)):new e(0,0)}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var o=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.r=t||0,this.g=r||0,this.b=n||0}return n(e,null,[{key:"fromArray",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(i(t))))}},{key:"fromHex",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(i([t.slice(2,4),t.slice(4,6),t.slice(6,8)].map(function(e){return parseInt(e,16)/255})))))}},{key:"white",get:function(){return new e(1,1,1)}},{key:"red",get:function(){return new e(1,0,0)}},{key:"green",get:function(){return new e(0,1,0)}},{key:"blue",get:function(){return new e(0,0,1)}},{key:"black",get:function(){return new e(0,0,0)}}]),n(e,[{key:"copy",get:function(){return new e(this.r,this.g,this.b)}},{key:"toArray",get:function(){return[this.r,this.g,this.b]}},{key:"toHex",get:function(){return"0x"+[(255*this.r).toString(16),(255*this.g).toString(16),(255*this.b).toString(16)].map(function(e){return e.length<2?"'0'"+e:e}).join("")}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1);var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t||null,this._startTranslation=null,this._targetTranslation=null,this._startRotation=null,this._targetRotation=null,this._startScale=null,this._targetScale=null,this._origin=i.Vec3.zero,this._rotateAroundOrigin=!1,this._localTranslation=i.Vec3.zero,this._localScale=i.Vec3.one,this._localRotation=i.Quat.identity,this._localTransformUnscaled=i.Mat4.identity,this._localTransform=i.Mat4.identity,this._worldTransformUnscaled=i.Mat4.identity,this._worldTransform=i.Mat4.identity,this._worldTransformDirty=!0}return n(e,[{key:"translate",value:function(e){this.setWorldTransformDirty(),this._localTranslation=this._localTranslation.add(e)}},{key:"rotate",value:function(e){this.setWorldTransformDirty(),this._localRotation=this._localRotation.mul(e)}},{key:"setWorldTransformDirty",value:function(){this._worldTransformDirty||this.node.walkEnabled(function(e){e.transform._worldTransformDirty=!0})}},{key:"updateLocalTransform",value:function(){var e=i.Mat4.identity,t=this._localTranslation,r=this._localRotation.toMat3,n=this._localScale;if(e.m00=r.m00,e.m01=r.m01,e.m02=r.m02,e.m10=r.m10,e.m11=r.m11,e.m12=r.m12,e.m20=r.m20,e.m21=r.m21,e.m22=r.m22,this._rotateAroundOrigin){var o=this._origin,a=o.x,u=o.y,s=o.z;e.m30=a*r.m00+u*r.m10+s*r.m20+t.x,e.m31=a*r.m01+u*r.m11+s*r.m21+t.y,e.m32=a*r.m02+u*r.m12+s*r.m22+t.z}else e.m30=t.x,e.m31=t.y,e.m32=t.z;this._localTransformUnscaled=e.clone,e.m00*=n.x,e.m01*=n.x,e.m02*=n.x,e.m10*=n.y,e.m11*=n.y,e.m12*=n.y,e.m20*=n.z,e.m21*=n.z,e.m22*=n.z,this._localTransform=e}},{key:"updateWorldTransform",value:function(){this.updateLocalTransform(),this.node.parent?(this._worldTransformUnscaled=this.node.parent.transform.worldTransformUnscaled.mul(this._localTransformUnscaled),this._worldTransform=this.node.parent.transform.worldTransformUnscaled.mul(this._localTransform)):(this._worldTransformUnscaled=this._localTransformUnscaled.clone,this._worldTransform=this._localTransform.clone),this._worldTransformDirty=!1}},{key:"right",get:function(){var e=this.worldTransform,t=e.m00,r=e.m10,n=e.m20;return new i.Vec3(t,r,n)}},{key:"up",get:function(){var e=this.worldTransform,t=e.m01,r=e.m11,n=e.m21;return new i.Vec3(t,r,n)}},{key:"forward",get:function(){var e=this.worldTransform,t=e.m02,r=e.m12,n=e.m22;return new i.Vec3(t,r,n)}},{key:"translation",set:function(e){this.setWorldTransformDirty(),this._localTranslation=new i.Vec3(e.x,e.y,e.z)},get:function(){return this._localTranslation}},{key:"rotation",set:function(e){this.setWorldTransformDirty(),this._localRotation=i.Quat.fromEulers(e.x,e.y,e.z)},get:function(){return this._localRotation}},{key:"scale",set:function(e){this.setWorldTransformDirty(),this._localScale=new i.Vec3(e.x,e.y,e.z)},get:function(){return this._localScale}},{key:"origin",set:function(e){this._rotateAroundOrigin=0!==e.lenSqrt,this._origin=e},get:function(){return this._origin}},{key:"worldTransform",get:function(){return this._worldTransformDirty&&this.updateWorldTransform(),this._worldTransform.clone}},{key:"worldTransformUnscaled",get:function(){return this._worldTransformDirty&&this.updateWorldTransform(),this._worldTransformUnscaled.clone}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.GeometryBatch=function e(t,r,i){n(this,e),this.geometry=t||null,this.material=r||null,this.worldTransforms=[i]},t.LightBatch=function e(t,r,i,o,a,u,s){n(this,e),this.type=t||null,this.color=[r],this.range=[i],this.diffuseStrength=[o],this.specularStrength=[a],this.shininess=[u],this.worldTransforms=[s]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(12);var o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t||null,this.parent=r||null,this.transform=new i.Transform(this),this.children=[],this.components=[]}return n(e,[{key:"addChild",value:function(){var t=new e(this.scene,this);return this.children.push(t),t}},{key:"removeChild",value:function(e){e.scene=null,e.parent=null,this.children.splice(this.children.indexOf(e),1)}},{key:"addComponent",value:function(e){var t=new e(this);return this.components.push(t),t}},{key:"removeComponent",value:function(e){e.node=null,this.components.splice(this.components.indexOf(e),1)}},{key:"update",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.children[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.update()}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}var o=!0,a=!1,u=void 0;try{for(var s,l=this.components[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){s.value.update()}}catch(e){a=!0,u=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw u}}}},{key:"remove",value:function(){for(var e=this.children,t=this.components;e.length>0;)e[e.length-1].remove();for(;t.length>0;)t[t.length-1].remove();this.scene=null,this.parent=null,this.transform.node=null,this.transform=null,this.parent.removeChild(this)}},{key:"walkEnabled",value:function(e){e(this);var t=!0,r=!1,n=void 0;try{for(var i,o=this.children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.walkEnabled(e)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=r(56),u=(n=a)&&n.__esModule?n:{default:n},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(46)),l=r(43);var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.scene=e,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"buildFromResource",value:function(e,t){var r=this;e.data.nodes.forEach(function(e){!function e(t,r,n){var i=r.addChild(),a=function(e,t,r){var o=(0,l.firstLetterToUpper)(e),a=s[o],u=i.addComponent(a);switch(o){case"Model":n.getResource(t,function(e){u.addMesh(e)});var c=!0,f=!1,h=void 0;try{for(var m,d=r[Symbol.iterator]();!(c=(m=d.next()).done);c=!0){var y=m.value;n.getResource(y,function(e){u.addMaterial(e)})}}catch(e){f=!0,h=e}finally{try{!c&&d.return&&d.return()}finally{if(f)throw h}}}},u=!0,c=!1,f=void 0;try{for(var h,m=Object.entries(t.components)[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var d=h.value,y=o(d,2),p=y[0],v=y[1];a(p,v.mesh,v.materials)}}catch(e){c=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(c)throw f}}var g=!0,b=!1,w=void 0;try{for(var _,x=Object.entries(t.transform)[Symbol.iterator]();!(g=(_=x.next()).done);g=!0){var k=_.value,T=o(k,2),E=(p=T[0],T[1]);i.transform[p]=E}}catch(e){b=!0,w=e}finally{try{!g&&x.return&&x.return()}finally{if(b)throw w}}t.nodes.forEach(function(t){e(t,i,n)})}(e,r,t)})}},{key:"remove",value:function(){for(var e=this.children,t=this.components;e.length>0;)e[e.length-1].remove();for(;t.length>0;)t[t.length-1].remove()}}]),t}();t.default=c},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,r){var n,i,o={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),u=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),s=null,l=0,c=[],f=r(58);function h(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=o[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(g(n.parts[a],t))}else{var u=[];for(a=0;a<n.parts.length;a++)u.push(g(n.parts[a],t));o[n.id]={id:n.id,refs:1,parts:u}}}}function m(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(u):r.push(n[a]={id:a,parts:[u]})}return r}function d(e,t){var r=u(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),c.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,i)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function p(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),v(t,e.attrs),d(e,t),t}function v(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function g(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=l++;r=s||(s=p(t)),n=_.bind(null,r,a,!1),i=_.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),d(e,t),t}(t),n=function(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=f(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}.bind(null,r,t),i=function(){y(r),r.href&&URL.revokeObjectURL(r.href)}):(r=p(t),n=function(e,t){var r=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){y(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=m(e,t);return h(r,t),function(e){for(var n=[],i=0;i<r.length;i++){var a=r[i];(u=o[a.id]).refs--,n.push(u)}e&&h(m(e,t),t);for(i=0;i<n.length;i++){var u;if(0===(u=n[i]).refs){for(var s=0;s<u.parts.length;s++)u.parts[s]();delete o[u.id]}}}};var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function _(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var i=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[r].concat(o).concat([i]).join("\n")}var a;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t,r){(e.exports=r(60)(!1)).push([e.i,"\n* {\n  margin: 0;\n  padding: 0;\n}\n\nhtml, body {\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n}\n\ncanvas {\n  background: gray;\n}\n",""])},function(e,t,r){var n=r(61);"string"==typeof n&&(n=[[e.i,n,""]]);var i={singleton:!0,sourceMap:!1,convertToAbsoluteUrls:!0,hmr:!0,transform:void 0,insertInto:void 0};r(59)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){"use strict";r(62);var n,i=r(2),o=(n=i)&&n.__esModule?n:{default:n},a=r(1);new o.default({elementId:"root",canvasId:"canvas"}).createScene("scene.cnf");var u=i.gl.createShader(i.gl.VERTEX_SHADER),s=i.gl.createShader(i.gl.FRAGMENT_SHADER);i.gl.shaderSource(u,"#version 300 es\nin vec3 a_pos;\nin vec3 a_col;\nuniform mat4 u_m;\nuniform mat4 u_v;\nuniform mat4 u_p;\nuniform mat4 u_mvp;\nout vec3 a_fragColor;\nvoid main () {\n  a_fragColor = a_col;\n  gl_Position = u_mvp * vec4(a_pos, 1.0);\n}"),i.gl.shaderSource(s,"#version 300 es\nprecision mediump float;\nin vec3 a_pos;\nin vec3 a_fragColor;\nout vec4 fragColor;\nvoid main () {\n  fragColor = vec4(a_fragColor, 1.0);\n}"),i.gl.compileShader(u),i.gl.compileShader(s);var l=i.gl.createProgram();i.gl.attachShader(l,u),i.gl.attachShader(l,s),i.gl.linkProgram(l);var c=i.gl.getAttribLocation(l,"a_pos"),f=i.gl.getAttribLocation(l,"a_col"),h=(i.gl.getUniformLocation(l,"u_m"),i.gl.getUniformLocation(l,"u_v"),i.gl.getUniformLocation(l,"u_p"),i.gl.getUniformLocation(l,"u_mvp")),m=i.gl.createBuffer();i.gl.bindBuffer(i.gl.ARRAY_BUFFER,m),i.gl.bufferData(i.gl.ARRAY_BUFFER,new Float32Array([-.5,-.5,0,1,0,1,.5,-.5,0,0,1,0,0,.5,0,0,0,1,0,.5,0,0,1,0,.5,-.5,0,0,1,0,1,.5,0,0,1,0]),i.gl.STATIC_DRAW);var d=i.gl.createBuffer();i.gl.bindBuffer(i.gl.ELEMENT_ARRAY_BUFFER,d),i.gl.bufferData(i.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,3,4,5]),i.gl.STATIC_DRAW),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,m),i.gl.bindBuffer(i.gl.ELEMENT_ARRAY_BUFFER,d),i.gl.enableVertexAttribArray(c),i.gl.enableVertexAttribArray(f),i.gl.vertexAttribPointer(c,3,i.gl.FLOAT,!1,24,0),i.gl.vertexAttribPointer(f,3,i.gl.FLOAT,!1,24,12),i.gl.clearColor(0,0,0,0),i.gl.clear(i.gl.COLOR_BUFFER_BIT),i.gl.useProgram(l);var y=a.Mat4.translate(0,0,-5).mul(a.Mat4.rotateY(1)),p=a.Mat4.identity.invert,v=a.Mat4.perspective(.25*Math.PI,window.innerWidth/window.innerHeight,.01,1e3).mul(p).mul(y);i.gl.uniformMatrix4fv(h,!1,v.toFloat32Array),i.gl.drawArrays(i.gl.TRIANGLES,0,6)}]);