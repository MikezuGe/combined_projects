!function(e){var t={};function n(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(i,l,function(t){return e[t]}.bind(null,l));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=59)}({59:function(e,t,n){"use strict";n.r(t);let i=null;var l=class{constructor({containerElement:e,width:t,height:n,mineCount:i,resetButton:l}){this.width=t,this.height=n,this.mineCount=i,this.cells=[],this.playing=!1,this.gameOver=!1,this.cellsOpened=0,this.cellsOpenToWin=t*n-i,this.resetButton=l,this.containerElement=e,this.createField({containerElement:e,width:t,height:n})}createField({containerElement:e,width:t,height:n}){const i=document.createElement("table");i.style.borderCollapse="collapse",this.resetButton.style.zIndex=1020;for(let e=0;e<n;e++){const n=document.createElement("tr"),l=[];for(let i=0;i<t;i++){const t=document.createElement("td");t.addEventListener("mouseup",t=>{t.preventDefault(),t.stopPropagation(),this.playing?this.clickCell({x:i,y:e,e:t}):(this.startGame(),this.insertMines({clickedX:i,clickedY:e}),this.clickCell({x:i,y:e,e:t}))}),t.style.border="1px solid #000",t.style.width="30px",t.style.height="30px",t.style.textAlign="center",t.style.verticalAlign="middle",t.innerHTML='<i class="fas fa-square"></i>',l.push({element:t,content:{isOpen:!1,hasMine:!1,hasFlag:!1,threat:0}}),n.append(t)}this.cells.push(l),i.append(n)}e.append(i)}clickCell({e:e,x:t,y:n}){this.gameOver&&this.resetButton.click();const i=this.cells[n][t];2===e.button?i.content.hasFlag?(i.element.innerHTML='<i class="fas fa-square"></i>',i.content.hasFlag=!1):(i.element.innerHTML='<i class="far fa-flag"></i>',i.content.hasFlag=!0):i.content.hasMine?this.endGame():!i.content.isOpen&&this.openCells({x:t,y:n}),this.checkIfVictory()}checkIfVictory(){console.log(this.cellsOpened,this.cellsOpenToWin),this.cellsOpened===this.cellsOpenToWin&&this.winGame()}openCells({x:e,y:t}){const n=this.cells;for(let i=-1;i<=1;i++)for(let l=-1;l<=1;l++){const s=e+l,o=t+i,a=n[o]&&n[o][s];!a||a.content.isOpen||a.content.hasMine||(this.cellsOpened++,a.content.isOpen=!0,a.element.innerHTML=a.content.threat?a.content.threat:((i||l)&&this.openCells({x:s,y:o}),""))}}insertMines({clickedX:e,clickedY:t}){const{floor:n,random:i}=Math,{height:l,width:s,mineCount:o,cells:a}=this;for(let r=o;r--;){const o=()=>n(i()*l),r=()=>n(i()*s);let c=null;do{const n=o(),i=r();t===n&&e===i||(c=a[n][i])}while(!c||c.content.hasMine);c.content.hasMine=!0}this.setThreats()}setThreats(){const e=this.cells;e.forEach((t,n)=>{t.forEach((t,i)=>{for(let l=-1;l<=1;l++)for(let s=-1;s<=1;s++){if(!l&&!s)continue;const o=i+s,a=n+l,r=e[a]&&e[a][o];r&&r.content.hasMine&&t.content.threat++}})})}startGame(){this.playing=!0}endGame(){this.cells.flat().forEach(function(e){e.element.innerHTML=e.content.hasMine?'<i class="fas fa-bomb"></i>':e.content.threat?e.content.threat:""}),this.playing=!1,this.gameOver=!0}winGame(){this.endGame();const{random:e}=Math;!function t(){let n=document.getElementById("winContainer");n||((n=document.createElement("div")).id="winContainer",n.style.width="100vw",n.style.height="100vh",document.body.append(n)),i=setTimeout(t,100+(100*e()|0));let l=document.createElement("div");l.innerHTML="🏆",l.style.position="absolute",l.style.zIndex=1010,l.style.fontSize=16+(48*e()|0)+"px",l.style.left=(e()*innerWidth|0)+"px",l.style.top=(e()*(innerHeight+pageYOffset)|0)+"px",n.append(l)}(),alert("Voitit pelin")}destroy(){for(;this.containerElement.lastChild;)this.containerElement.removeChild(this.containerElement.lastChild);const e=document.getElementById("winContainer");e&&(clearTimeout(i),e.remove())}};const s=document.getElementById("root");s.style.margin="0 auto",s.style.maxWidth="500px",s.style.width="100%";const o=document.createElement("div"),a=document.createElement("div");s.append(a),s.append(o);const r=document.createElement("button");r.innerText="Reset",a.append(r);const c={containerElement:o,width:8,height:8,mineCount:10,resetButton:r},h=document.createElement("div"),d=document.createElement("label");d.htmlFor="minesInput",d.innerText="Mines: ",h.append(d);const u=document.createElement("input");u.id="minesInput",u.type="number",u.max=c.width*c.height-1,u.min=1,u.step=1,u.value=c.mineCount,u.addEventListener("change",({target:{value:e}})=>{c.mineCount=parseInt(e)}),h.append(u);const m=document.createElement("div"),p=document.createElement("label");p.htmlFor="widthInput",p.innerText="Width: ",m.append(p);const f=document.createElement("input");f.id="widthInput",f.type="number",f.max=10,f.min=3,u.step=1,f.value=c.width,f.addEventListener("change",({target:{value:e}})=>{c.width=parseInt(e),u.max=c.width*c.height-1,parseInt(u.value)>=u.max&&(u.value=u.max,c.mineCount=u.max)}),m.append(f);const g=document.createElement("div"),y=document.createElement("label");y.htmlFor="heightInput",y.innerText="Heigh: ",g.append(y);const v=document.createElement("input");v.id="heightInput",v.type="number",v.max=10,v.min=3,u.step=1,v.value=c.height,v.addEventListener("change",({target:{value:e}})=>{c.height=parseInt(e),u.max=c.width*c.height-1,parseInt(u.value)>=u.max&&(u.value=u.max,c.mineCount=u.max)}),g.append(v),a.append(h),a.append(m),a.append(g);let x=new l(c);r.addEventListener("click",()=>{x.destroy(),x=new l(c)}),document.addEventListener("contextmenu",e=>e.preventDefault())}});