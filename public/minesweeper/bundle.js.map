{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/minesweeper/src/Field.js","webpack:///./public/minesweeper/src/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","timeout","Field","constructor","containerElement","width","height","mineCount","resetButton","this","cells","playing","gameOver","cellsOpened","cellsOpenToWin","createField","table","document","createElement","style","borderCollapse","zIndex","row","rowArray","k","cell","addEventListener","e","preventDefault","stopPropagation","clickCell","x","y","startGame","insertMines","clickedX","clickedY","border","textAlign","verticalAlign","innerHTML","push","element","content","isOpen","hasMine","hasFlag","threat","append","click","button","endGame","openCells","checkIfVictory","console","log","winGame","nx","ny","floor","random","Math","randomRow","randomCell","rRow","rCell","setThreats","forEach","neighbourCell","flat","winElement","getElementById","id","body","setTimeout","el","position","fontSize","left","innerWidth","top","innerHeight","pageYOffset","alert","destroy","lastChild","removeChild","clearTimeout","remove","rootElement","margin","maxWidth","settingsElement","innerText","gameSettings","mineInputContainer","minesInputLabel","htmlFor","minesInput","type","max","min","step","target","parseInt","widthInputContainer","widthInputLabel","widthInput","heightInputContainer","heightInputLabel","heightInput","field","event"],"mappings":"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","file":"minesweeper/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 59);\n","// This is minesweeper\n\n\nlet timeout = null;\n\n\nclass Field {\n\n  constructor ({ containerElement, width, height, mineCount, resetButton, }) {\n    this.width = width;\n    this.height = height;\n    this.mineCount = mineCount;\n    this.cells = [];\n\n    this.playing = false;\n    this.gameOver = false;\n    this.cellsOpened = 0;\n    this.cellsOpenToWin = width * height - mineCount;\n\n    this.resetButton = resetButton;\n    this.containerElement = containerElement;\n\n    this.createField({ containerElement, width, height, });\n  }\n\n  createField ({ containerElement, width, height, }) {\n    const table = document.createElement('table');\n    table.style.borderCollapse = 'collapse';\n    this.resetButton.style.zIndex = 1020;\n    for (let i = 0; i < height; i++) {\n      const row = document.createElement('tr');\n      const rowArray = [];\n      for (let k = 0; k < width; k++) {\n        const cell = document.createElement('td');\n        cell.addEventListener('mouseup', e => {\n          e.preventDefault();\n          e.stopPropagation();\n          if (!this.playing) {\n            this.startGame();\n            this.insertMines({ clickedX: k, clickedY: i, });\n            this.clickCell({ x: k, y: i, e, });\n          } else {\n            this.clickCell({ x: k, y: i, e, });\n          }\n        });\n        cell.style.border = '1px solid #000';\n        cell.style.width = '30px';\n        cell.style.height = '30px';\n        cell.style.textAlign = 'center';\n        cell.style.verticalAlign = 'middle';\n        cell.innerHTML = '<i class=\"fas fa-square\"></i>';\n        rowArray.push({\n          element: cell,\n          content: {\n            isOpen: false,\n            hasMine: false,\n            hasFlag: false,\n            threat: 0, // Number of surrounding mines, 0-9\n          },\n        })\n        row.append(cell);\n      }\n      this.cells.push(rowArray);\n      table.append(row);\n    }\n    containerElement.append(table);\n  }\n\n  clickCell ({ e, x, y, }) {\n    if (this.gameOver) {\n      this.resetButton.click();\n    }\n\n    const cell = this.cells[y][x];\n\n    if (e.button === 2) {\n      cell.content.hasFlag\n        ? (\n          cell.element.innerHTML = '<i class=\"fas fa-square\"></i>',\n          cell.content.hasFlag = false\n        )\n        : (\n          cell.element.innerHTML = '<i class=\"far fa-flag\"></i>',\n          cell.content.hasFlag = true\n        );\n    } else {\n      cell.content.hasMine ? this.endGame() : !cell.content.isOpen && this.openCells({ x, y, });\n    }\n    this.checkIfVictory();\n  }\n\n  checkIfVictory () {\n    console.log(this.cellsOpened, this.cellsOpenToWin);\n    if (this.cellsOpened === this.cellsOpenToWin) {\n      this.winGame();\n    }\n  }\n\n  openCells ({ x, y, }) {\n    const cells = this.cells;\n    for (let i = -1; i <= 1; i++) {\n      for (let k = -1; k <= 1; k++) {\n        const nx = x + k;\n        const ny = y + i;\n        const cell = cells[ny] && cells[ny][nx];\n        if (!cell || cell.content.isOpen || cell.content.hasMine) {\n          continue;\n        }\n        this.cellsOpened++;\n        cell.content.isOpen = true;\n        cell.element.innerHTML = cell.content.threat\n          ? cell.content.threat\n          : ((i || k) && this.openCells({ x: nx, y: ny, }), '');\n      }\n    }\n  }\n\n  insertMines ({ clickedX, clickedY, }) {\n    const { floor, random, } = Math;\n    const { height, width, mineCount, cells, } = this;\n    for (let i = mineCount; i--;) {\n      const randomRow = () => floor(random() * height);\n      const randomCell = () => floor(random() * width);\n      let cell = null;\n      do {\n        const rRow = randomRow();\n        const rCell = randomCell();\n        if (clickedY === rRow && clickedX === rCell) {\n          continue;\n        }\n        cell = cells[rRow][rCell];\n      } while (!cell || cell.content.hasMine);\n      cell.content.hasMine = true;\n    }\n    this.setThreats();\n  }\n\n  setThreats () {\n    const cells = this.cells;\n    cells.forEach((row, y) => {\n      row.forEach((cell, x) => {\n        for (let i = -1; i <= 1; i++) {\n          for (let k = -1; k <= 1; k++) {\n            if (!i && !k) {\n              continue;\n            }\n            const nx = x + k;\n            const ny = y + i;\n            const neighbourCell = cells[ny] && cells[ny][nx];\n            if (neighbourCell && neighbourCell.content.hasMine) {\n              cell.content.threat++;\n            }\n          }\n        }\n      });\n    });\n  }\n\n  startGame () {\n    this.playing = true;\n  }\n\n  endGame () {\n    this.cells.flat().forEach(function (cell) {\n      cell.element.innerHTML = cell.content.hasMine\n        ? '<i class=\"fas fa-bomb\"></i>'\n        : cell.content.threat\n          ? cell.content.threat\n          : '';\n    });\n    this.playing = false;\n    this.gameOver = true;\n  }\n\n  winGame () {\n    this.endGame();\n    const { random, } = Math;\n    (function r () {\n      let winElement = document.getElementById('winContainer');\n      if (!winElement) {\n        winElement = document.createElement('div');\n        winElement.id = 'winContainer';\n        winElement.style.width = '100vw';\n        winElement.style.height = '100vh';\n        document.body.append(winElement);\n      }\n      timeout = setTimeout(r, 100 + (random() * 100 | 0));\n      let el = document.createElement(`div`);\n      el.innerHTML = `ðŸ†`;\n      el.style.position = `absolute`;\n      el.style.zIndex = 1010;\n      el.style.fontSize = (((random() * 48) | 0) + 16) + `px`;\n      el.style.left = ((random() * innerWidth) | 0) + `px`;\n      el.style.top = ((random() * (innerHeight + pageYOffset)) | 0) + `px`;\n      winElement.append(el);\n    })();\n    alert('Voitit pelin');\n  }\n\n  destroy () {\n    while (this.containerElement.lastChild) {\n      this.containerElement.removeChild(this.containerElement.lastChild);\n    }\n    const winElement = document.getElementById('winContainer');\n    if (winElement) {\n      clearTimeout(timeout);\n      winElement.remove();\n    }\n  }\n\n}\n\n\nexport default Field;\n","import Field from './Field';\n\n\nconst rootElement = document.getElementById('root');\nrootElement.style.margin = '0 auto';\nrootElement.style.maxWidth = '500px'\nrootElement.style.width = '100%'\nconst containerElement = document.createElement('div');\nconst settingsElement = document.createElement('div');\nrootElement.append(settingsElement);\nrootElement.append(containerElement);\n\n\nconst resetButton = document.createElement('button');\nresetButton.innerText = 'Reset';\nsettingsElement.append(resetButton);\n\n\nconst gameSettings = {\n  containerElement,\n  width: 8,\n  height: 8,\n  mineCount: 10,\n  resetButton,\n};\n\n\nconst mineInputContainer = document.createElement('div');\nconst minesInputLabel = document.createElement('label');\nminesInputLabel.htmlFor = 'minesInput';\nminesInputLabel.innerText = 'Mines: ';\nmineInputContainer.append(minesInputLabel);\nconst minesInput = document.createElement('input');\nminesInput.id = 'minesInput';\nminesInput.type = 'number';\nminesInput.max = gameSettings.width * gameSettings.height - 1;\nminesInput.min = 1;\nminesInput.step = 1;\nminesInput.value = gameSettings.mineCount;\nminesInput.addEventListener('change', ({ target: { value, }, }) => {\n  gameSettings.mineCount = parseInt(value);\n});\nmineInputContainer.append(minesInput);\n\nconst widthInputContainer = document.createElement('div');\nconst widthInputLabel = document.createElement('label');\nwidthInputLabel.htmlFor = 'widthInput';\nwidthInputLabel.innerText = 'Width: ';\nwidthInputContainer.append(widthInputLabel);\nconst widthInput = document.createElement('input');\nwidthInput.id = 'widthInput';\nwidthInput.type = 'number';\nwidthInput.max = 10;\nwidthInput.min = 3;\nminesInput.step = 1;\nwidthInput.value = gameSettings.width;\nwidthInput.addEventListener('change', ({ target: { value, }, }) => {\n  gameSettings.width = parseInt(value);\n  minesInput.max = gameSettings.width * gameSettings.height - 1;\n  if (parseInt(minesInput.value) >= minesInput.max) {\n    minesInput.value = minesInput.max;\n    gameSettings.mineCount = minesInput.max;\n  }\n});\nwidthInputContainer.append(widthInput);\n\nconst heightInputContainer = document.createElement('div');\nconst heightInputLabel = document.createElement('label');\nheightInputLabel.htmlFor = 'heightInput';\nheightInputLabel.innerText = 'Heigh: ';\nheightInputContainer.append(heightInputLabel);\nconst heightInput = document.createElement('input');\nheightInput.id = 'heightInput';\nheightInput.type = 'number';\nheightInput.max = 10;\nheightInput.min = 3;\nminesInput.step = 1;\nheightInput.value = gameSettings.height;\nheightInput.addEventListener('change', ({ target: { value, }, }) => {\n  gameSettings.height = parseInt(value);\n  minesInput.max = gameSettings.width * gameSettings.height - 1;\n  if (parseInt(minesInput.value) >= minesInput.max) {\n    minesInput.value = minesInput.max;\n    gameSettings.mineCount = minesInput.max;\n  }\n});\nheightInputContainer.append(heightInput);\n\n\nsettingsElement.append(mineInputContainer);\nsettingsElement.append(widthInputContainer);\nsettingsElement.append(heightInputContainer);\n\n\nlet field = new Field(gameSettings);\nresetButton.addEventListener('click', () => {\n  field.destroy();\n  field = new Field(gameSettings);\n});\n\ndocument.addEventListener('contextmenu', event => event.preventDefault());\n"],"sourceRoot":""}